{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst getPhotos = async (img,  page = 1, perPage = 15) => {\n    const API_KEY = \"47393342-0b139bb531c328d079618af8b\";\n    const searchParams = {\n        key: API_KEY,\n        q: img,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    };\n\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: searchParams,\n        });\n        return response.data;\n    } catch (error) {\n        console.error(\"Failed to fetch photos:\", error.message);\n        return { hits: [], totalHits: 0 };\n    }\n};\n\nexport default getPhotos;","const galleryMarkup = (images) => {\n    return images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>`<li class=\"gallery-item\" >\n            <a href=\"${largeImageURL}\" alt=\"${tags}\" title=\"\"/>\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n            <div class=\"gallery-container\">\n            <p class=\"item\"><span class=\"item-text\">Likes</span> <span>${likes}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Wiews</span> <span>${views}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Comments</span> <span>${comments}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Downlods</span> <span>${downloads}</span></p>\n            </div></a>\n            </li>`    \n        )\n        .join(\"\");\n};\n\nexport default galleryMarkup;\n","import getPhotos from \"./js/pixabay-api\";\nimport galleryMarkup from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet Lightboxgallery = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\n\nlet currentPage = 1; \nlet currentSearch = \"\";\nlet loadedImages = 0;\n\nconst form = document.getElementById(\"search-form\");\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn= document.querySelector(\".load-button\")\nloadBtn.style.display = \"none\";\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const searchInput = document.getElementById(\"search-input\");\n    const searchTerm = searchInput.value.trim();\n\n    if (!searchTerm) {\n        iziToast.info({\n            title: '',\n            message: 'Please, enter a search term!',\n            messageColor: '#FAFAFB',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n        });\n        return;\n    }\n    currentSearch = searchTerm; \n    currentPage = 1; \n    loadedImages = 0;\n    gallery.innerHTML = ''; \n    loader.style.display = \"block\";\n    loadBtn.style.display = \"none\";\n    try {\n        const data = await getPhotos(searchTerm, currentPage);\n        const hits = data.hits;\n        const totalHits = data.totalHits;\n\n        if (!hits.length) {\n            iziToast.info({\n                title: '',\n                backgroundColor: '#EF4040',\n                messageColor: '#FAFAFB',\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                position: 'topRight',\n            });\n        } else {\n            loadedImages += hits.length;\n            gallery.innerHTML = galleryMarkup(hits);\n            Lightboxgallery.refresh();\n\n            if (loadedImages < totalHits) {\n                loadBtn.style.display = \"block\"; \n            } else {\n                loadBtn.style.display = \"none\";\n            }\n        }\n    } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.',\n            messageColor: '#FAFAFB',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n        });\n    }finally {\n        loader.style.display = \"none\";\n    }\n});\n\nloadBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    loader.style.display = \"block\";\n\n    try {\n        const data = await getPhotos(currentSearch, currentPage);\n\n        if (data.hits.length) {\n            loadedImages += data.hits.length; \n            gallery.innerHTML += galleryMarkup(data.hits);\n            Lightboxgallery.refresh();\n    \n                window.scrollBy({\n                    top: 570, \n                    behavior: \"smooth\",\n                });\n\n            if (loadedImages >= data.totalHits) {\n                loadBtn.style.display = \"none\";\n                iziToast.info({\n                    message: 'We`re sorry, but you`ve reached the end of search results.',\n                    messageColor: '#FAFAFB',\n                    backgroundColor: '#91A9FF',\n                    position: 'topRight',\n                });\n            }\n        }\n    } catch (error) {\n        console.error(\"Error loading more photos:\", error);\n        iziToast.error({\n            message: 'Failed to load more images. Please try again later.',\n            messageColor: '#FAFAFB',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n        });\n    } finally {\n        loader.style.display = \"none\";\n    }\n});"],"names":["getPhotos","img","page","perPage","searchParams","axios","error","galleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","Lightboxgallery","SimpleLightbox","currentPage","currentSearch","loadedImages","form","gallery","loader","loadBtn","event","searchTerm","iziToast","data","hits","totalHits"],"mappings":"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"}